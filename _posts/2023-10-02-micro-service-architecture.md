---
layout: post
title: Micro Service Architecture
date: 2023-10-02 21:43 +0900
categories: [Backend]
tags: [gdsc yonsei, msa]
render_with_liquid: false
---

## MSA (Micro Service Architecture)

애플리케이션의 복잡성이 증가함에 따라 개발자들은 이를 관리하고 확장하는 데 필요한 방법을 찾아다. 그 중 하나가 바로 마이크로서비스 아키텍처(Micro Service Architecture, MSA)이다. 이 포스트에서는 마이크로서비스 아키텍처의 기본 개념부터 설계 원칙, 장단점까지 살펴본다.

## MSA?

![MSA](/assets/img/posts/msa.png){: w="700" h="400" }
_출처 : https://ssup2.github.io/theory_analysis/MSA/_

마이크로서비스 아키텍처는 큰 애플리케이션을 작은, 독립적인 서비스들로 분해하는 설계 패턴이다. 각각의 서비스는 독립적으로 배포하고 운영할 수 있으며, 각각은 자신만의 비즈니스 로직과 데이터베이스를 가진다.

MSA는 다음 특징을 가진다:

- **독립성**: 각 서비스는 다른 서비스와 독립적으로 배포 및 확장할 수 있다.
- **모듈성**: 애플리케이션은 작은 조각들(즉, 모듈)로 나뉜다.
- **분산 개발**: 팀별로 다른 서비스를 독립적으로 개발할 수 있다.

## MSA의 장점

기존 Monolithic Architecture는 특정 기능을 담당하는 Module의 집합으로 구성되며, 각 Module은 하나의 DB를 공유한다. 따라서 일반적으로 Module 사이의 경계가 모호하고 다수의 Module이 하나의 Schema를 공유하는 경우가 많다. 일부 Module 혹은 DB의 변경으로 인한 변경 사항이 많아질 수 있으며 개발 효율을 떨어뜨리는 요인이 된다. 하지만 MSA에서는 MSA의 특징으로 인해 앞서 언급한 문제점을 해결할 수 있는 장점이 있다.

### 유연성

MSA의 가장 큰 장점 중 하나는 유연성이다. 모듈이 독립적으로 존재하므로 각 팀이 해당 모듈에 맞는 비즈니스 로직을 필요한 스택으로 구현할 수 있다.

### 확장성

개별 서버가 독립적으로 운영되기 때문에 특정 기능에 대한 요구가 증가하면 해당 기능을 담당하는 서버만 확장하면 되어 자원 낭비가 줄어들게 된다.

### 장애 격리

개별 서비스가 독립적으로 운영되기 때문에, 하나의 서비스에 문제가 발생해도 전체 시스템에 영향을 미치지 않는다.

## 설계 원칙

MSA를 성공적으로 구현하려면 다음과 같은 설계 원칙을 따라야 한다:

### 단일 책임 원칙

각 마이크로서비스는 한 가지 비즈니스 로직만 처리해야 한다. 이것은 소프트웨어 엔지니어링에서 널리 알려진 SOLID 원칙 중 하나인 '단일 책임 원칙'과 맞닿아 있다.

### 경계성

각 마이크로서비스는 그것만의 데이터베이터를 소유하고 API를 통해서만 다른 서버와 소통해야 한다. 이러한 방식은 각 서비스의 독립성을 보장하며, 데이터 일관성을 유지하는 데 도움이 된다.

## MSA의 단점

앞서 언급한 장점에도 불구하고 MSA를 선택할 때에는 신중해야 하는데, 다음과 같은 단점들이 있기 때문이다:

### 복잡성

여러개의 작은 서비스로 구성되므로 전체 시스템의 복잡성이 증가한다. 각 시스템을 독립적으로 배포하고 운영해야 하므로 운영 및 배포 과정이 복잡해지며 분산 시스템에서 발생할 수 있는 문제인 네트워크 지연, 장애 처리, 일관성 유지 등을 해결하기 위한 추가적인 노력과 기술적 지식을 요구한다.

### 데이터 일관성

각각의 마이크로서비스가 자체 데이터베이스를 가지고 있기 때문에 데이터 일관성을 유지하기 위해 추가적인 조치가 필요하다. 트랜잭션 처리와 데이터 동기화를 위한 매커니즘이나 패턴 (Saga 패턴 등) 등을 사용하여 데이터 일관성 문제를 해결해야 한다.

MSA는 위와 같이 뚜렷한 장단점을 가지고 있으므로, 요구사항에 따라 적합한 아키텍쳐를 선택하여 구현하는 것이 중요하다고 할 수 있다.
